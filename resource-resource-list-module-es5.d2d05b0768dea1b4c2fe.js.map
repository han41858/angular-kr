{"version":3,"sources":["webpack:///src/app/custom-elements/resource/resource.service.ts","webpack:///src/app/custom-elements/resource/resource-list.component.html","webpack:///src/app/custom-elements/resource/resource-list.component.ts","webpack:///src/app/custom-elements/resource/resource-list.module.ts"],"names":["ResourceService","resourcesPath","http","this","categories","getCategories","get","pipe","map","data","mkCategories","categoryJson","Object","keys","catKey","cat","id","makeId","title","order","subCategories","mkSubCategories","sort","compareCats","publishLast","connect","subCategoryJson","subKey","sub","resources","mkResources","resourceJson","resKey","res","category","subCategory","compareTitles","l","r","toUpperCase","toLowerCase","replace","ResourceListComponent","resourceService","locationService","search","subscribe","cats","selectCategory","selectedCategory","find","setSearch","ResourceListModule","customElementComponent"],"mappings":"+eAYaA,E,wEAHPC,EAAgB,IAAqB,iBAGpC,IAAMD,EAAN,WAGL,WAAoBE,2BAAA,KAAAA,OAClBC,KAAKC,WAAaD,KAAKE,gBAJpB,6DASH,IAAMD,EAAaD,KAAKD,KAAKI,IAASL,GAAeM,KACnD,OAAAC,EAAA,IAAIC,YAAQC,OAUIC,EAVSF,EAWtBG,OAAOC,KAAKF,GAAcH,KAAIM,YACnC,IAAMC,EAAMJ,EAAaG,GACzB,MAAO,CACLE,GAAIC,EAAOH,GACXI,MAAOJ,EACPK,MAAOJ,EAAII,MACXC,cAAeC,EAAgBN,EAAIK,cAAeN,OAGrDQ,KAAKC,GAVR,IAAsBZ,KAThB,OAAAa,EAAA,MAIF,OADCpB,EAAiDqB,UAC3CrB,MAfJ,M,oCAAMJ,GAAe,Y,yBAAfA,EAAe,QAAfA,EAAe,Y,GAkC5B,SAASqB,EAAgBK,EAAsBZ,GAC7C,OAAOF,OAAOC,KAAKa,GAAiBlB,KAAImB,YACpC,IAAMC,EAAMF,EAAgBC,GAC5B,MAAO,CACLX,GAAIC,EAAOU,GACXT,MAAOS,EACPR,MAAOS,EAAIT,MACXU,UAAWC,EAAYF,EAAIC,UAAWF,EAAQb,OAGnDQ,KAAKC,GAIR,SAASO,EAAYC,EAAmBJ,EAAgBb,GACtD,OAAOF,OAAOC,KAAKkB,GAAcvB,KAAIwB,YACnC,IAAMC,EAAMF,EAAaC,GAIzB,OAHAC,EAAIC,SAAWpB,EACfmB,EAAIE,YAAcR,EAClBM,EAAIjB,GAAKC,EAAOe,GACTC,KAERX,KAAKc,GAGR,SAASb,EAAYc,EAA2BC,GAC9C,OAAOD,EAAElB,QAAUmB,EAAEnB,MAAQiB,EAAcC,EAAGC,GAAKD,EAAElB,MAAQmB,EAAEnB,MAAQ,GAAK,EAG9E,SAASiB,EAAcC,EAAoBC,GAC1C,OAAOD,EAAEnB,MAAMqB,cAAgBD,EAAEpB,MAAMqB,cAAgB,GAAK,EAG7D,SAAStB,EAAOC,GACd,OAAOA,EAAMsB,cAAcC,QAAQ,OAAQ,K,qDC9EzC,cAGE,0FAAqC,2FACO,QAAkB,O,mCAH9D,6CAG4C,uB,yBASxC,iBACE,eACE,cACE,aAAI,QAAkB,OACtB,eAAgC,QAAqC,OACvE,OACF,OACF,Q,4BAN6E,gCAEnE,sBAC4B,wC,yBALxC,cACE,sBAQF,Q,uBAR0B,4B,yBAL5B,cACE,cACA,eAA8B,QAAqB,OAEnD,sBAUF,Q,uBAb6B,oBAAAzB,IACG,sBAEzB,qCCHN,IAAM0B,EAAN,IAAMA,EAAN,WAKL,WACUC,EACAC,2BADA,KAAAD,kBACA,KAAAC,kBAPL,wDAUK,WACFV,EAAY/B,KAAKyC,gBAAgBC,SAAmB,UAAK,GAG/D1C,KAAKwC,gBAAgBvC,WAAW0C,WAAUC,YACxC5C,EAAKC,WAAa2C,EAClB5C,EAAK6C,eAAed,QAhBnB,qCAoBUlB,GACbA,EAAKA,EAAGwB,cACRrC,KAAK8C,iBACH9C,KAAKC,WAAW8C,MAAKhB,YAAQA,OAAIA,EAASlB,GAAGwB,gBAAkBxB,MAAOb,KAAKC,WAAW,GACxFD,KAAKyC,gBAAgBO,UAAU,GAAI,CAACjB,SAAU/B,KAAK8C,iBAAiBjC,SAxBjE,M,oCAAM0B,GAAqB,oB,uBAArBA,EAAqB,wmBDXlC,gBACE,gBACE,oBAKF,OACA,gBACE,gBACE,sBAeF,OACF,OACF,Q,MAzBO,qCAQI,yF,0CETX,mDAWO,IAAMU,EAAN,IAAMA,EANb,qCAOE,KAAAC,uBAAoC,I,qBADzBD,I,oDAAAA,IAAkB,UAFlB,CAAE,GAAiB,SAHrB,CAAE,Q","file":"x","sourcesContent":["import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\nimport { ConnectableObservable, Observable } from 'rxjs';\nimport { map, publishLast } from 'rxjs/operators';\n\nimport { Category, Resource, SubCategory } from './resource.model';\nimport { CONTENT_URL_PREFIX } from 'app/documents/document.service';\n\nconst resourcesPath = CONTENT_URL_PREFIX + 'resources.json';\n\n@Injectable()\nexport class ResourceService {\n  categories: Observable<Category[]>;\n\n  constructor(private http: HttpClient) {\n    this.categories = this.getCategories();\n  }\n\n  private getCategories(): Observable<Category[]> {\n\n    const categories = this.http.get<any>(resourcesPath).pipe(\n      map(data => mkCategories(data)),\n      publishLast(),\n    );\n\n    (categories as ConnectableObservable<Category[]>).connect();\n    return categories;\n  }\n}\n\n// Extract sorted Category[] from resource JSON data\nfunction mkCategories(categoryJson: any): Category[] {\n  return Object.keys(categoryJson).map(catKey => {\n    const cat = categoryJson[catKey];\n    return {\n      id: makeId(catKey),\n      title: catKey,\n      order: cat.order,\n      subCategories: mkSubCategories(cat.subCategories, catKey)\n    } as Category;\n  })\n  .sort(compareCats);\n}\n\n// Extract sorted SubCategory[] from JSON category data\nfunction mkSubCategories(subCategoryJson: any, catKey: string): SubCategory[] {\n  return Object.keys(subCategoryJson).map(subKey => {\n      const sub = subCategoryJson[subKey];\n      return {\n        id: makeId(subKey),\n        title: subKey,\n        order: sub.order,\n        resources: mkResources(sub.resources, subKey, catKey)\n      } as SubCategory;\n  })\n  .sort(compareCats);\n}\n\n// Extract sorted Resource[] from JSON subcategory data\nfunction mkResources(resourceJson: any, subKey: string, catKey: string): Resource[] {\n  return Object.keys(resourceJson).map(resKey => {\n    const res = resourceJson[resKey];\n    res.category = catKey;\n    res.subCategory = subKey;\n    res.id = makeId(resKey);\n    return res as Resource;\n  })\n  .sort(compareTitles);\n}\n\nfunction compareCats(l: Category | SubCategory, r: Category | SubCategory) {\n  return l.order === r.order ? compareTitles(l, r) : l.order > r.order ? 1 : -1;\n}\n\nfunction compareTitles(l: {title: string}, r: {title: string}) {\n return l.title.toUpperCase() > r.title.toUpperCase() ? 1 : -1;\n}\n\nfunction makeId(title: string) {\n  return title.toLowerCase().replace(/\\s+/g, '-');\n}\n","<div class=\"resources-container\">\r\n  <div class=\"flex-center group-buttons\">\r\n    <a *ngFor=\"let category of categories\"\r\n      [class.selected]=\"category.id == selectedCategory.id\"\r\n      class=\"button mat-button filter-button\"\r\n      (click)=\"selectCategory(category.id)\"\r\n      (keyup.enter)=\"selectCategory(category.id)\">{{category.title}}</a>\r\n  </div>\r\n  <div class=\"l-flex--column align-items-center\">\r\n    <div class=\"shadow-1 showcase\">\r\n      <div *ngFor=\"let subCategory of selectedCategory?.subCategories\">\r\n        <a class=\"h-anchor-offset\" id=\"{{subCategory.id}}\"></a>\r\n        <h3 class=\"subcategory-title\">{{subCategory.title}}</h3>\r\n\r\n        <div *ngFor=\"let resource of subCategory.resources\">\r\n          <div class=\"c-resource\" *ngIf=\"resource.rev\">\r\n            <a class=\"l-flex--column resource-row-link\" rel=\"noopener\" target=\"_blank\" [href]=\"resource.url\">\r\n              <div>\r\n                <h4>{{resource.title}}</h4>\r\n                <p class=\"resource-description\">{{resource.desc || 'No Description'}}</p>\r\n              </div>\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\n\nimport { Category } from './resource.model';\nimport { ResourceService } from './resource.service';\nimport { LocationService } from 'app/shared/location.service';\n\n/* tslint:disable:template-accessibility-elements-content */\n@Component({\n  selector: 'aio-resource-list',\n  templateUrl: 'resource-list.component.html'\n})\nexport class ResourceListComponent implements OnInit {\n\n  categories: Category[];\n  selectedCategory: Category;\n\n  constructor(\n    private resourceService: ResourceService,\n    private locationService: LocationService) {\n  }\n\n  ngOnInit() {\n    const category =  this.locationService.search()['category'] || '';\n    // Not using async pipe because cats appear twice in template\n    // No need to unsubscribe because categories observable completes.\n    this.resourceService.categories.subscribe(cats => {\n      this.categories = cats;\n      this.selectCategory(category);\n    });\n  }\n\n  selectCategory(id: string) {\n    id = id.toLowerCase();\n    this.selectedCategory =\n      this.categories.find(category => category.id.toLowerCase() === id) || this.categories[0];\n    this.locationService.setSearch('', {category: this.selectedCategory.id});\n  }\n}\n","import { NgModule, Type } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ResourceListComponent } from './resource-list.component';\nimport { ResourceService } from './resource.service';\nimport { WithCustomElementComponent } from '../element-registry';\n\n@NgModule({\n  imports: [ CommonModule ],\n  declarations: [ ResourceListComponent ],\n  entryComponents: [ ResourceListComponent ],\n  providers: [ ResourceService ]\n})\nexport class ResourceListModule implements WithCustomElementComponent {\n  customElementComponent: Type<any> = ResourceListComponent;\n}\n"]}