{
  "id": "guide/bazel",
  "title": "Building with Bazel",
  "contents": "\n\n\n  <div class=\"github-links\">\n    <a href=\"https://github.com/angular/angular/edit/master/aio/content/guide/bazel.md?message=docs%3A%20describe%20your%20change...\" aria-label=\"Suggest Edits\" title=\"Suggest Edits\"><i class=\"material-icons\" aria-hidden=\"true\" role=\"img\">mode_edit</i></a>\n  </div>\n\n\n<div class=\"content\">\n<h1 id=\"building-with-bazel\">Building with Bazel<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/bazel#building-with-bazel\"><i class=\"material-icons\">link</i></a></h1>\n<p>This guide explains how to build and test Angular apps with Bazel. </p>\n<div class=\"alert is-helpful\">\n<p>This guide assumes you are already familiar with developing and building Angular applications using the <a href=\"cli\">CLI</a>. </p>\n<p>It describes features which are part of Angular Labs, and are not considered a stable, supported API.</p>\n</div>\n<h2 id=\"using-bazel-with-the-angular-cli\">Using Bazel with the Angular CLI<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/bazel#using-bazel-with-the-angular-cli\"><i class=\"material-icons\">link</i></a></h2>\n<p>The <code>@angular/bazel</code> package provides a builder that allows Angular CLI to use Bazel as the build tool.</p>\n<p>To opt-in an existing application, run</p>\n<code-example language=\"sh\">\nng add @angular/bazel\n</code-example>\n<p>To use Bazel in a new application, first install <code>@angular/bazel</code> globally</p>\n<code-example language=\"sh\">\nnpm install -g @angular/bazel\n</code-example>\n<p>then create the new application with</p>\n<code-example language=\"sh\">\nng new --collection=@angular/bazel\n</code-example>\n<p>Now when you use Angular CLI build commands such as <code>ng build</code> and <code>ng serve</code>,\nBazel is used behind the scenes.\nOutputs from Bazel appear in the <code>dist/bin</code> folder.</p>\n<blockquote>\n<p>The command-line output includes extra logging from Bazel.\nWe plan to reduce this in the future.</p>\n</blockquote>\n<h3 id=\"removing-bazel\">Removing Bazel<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/bazel#removing-bazel\"><i class=\"material-icons\">link</i></a></h3>\n<p>If you need to opt-out from using Bazel, you can restore the backup files:</p>\n<ul>\n<li><code>/angular.json.bak</code> replaces <code>/angular.json</code></li>\n<li><code>/tsconfig.json.bak</code> replaces <code>/tsconfig.json</code></li>\n</ul>\n<h2 id=\"advanced-configuration\">Advanced configuration<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/bazel#advanced-configuration\"><i class=\"material-icons\">link</i></a></h2>\n<div class=\"alert is-helpful\">\n<p>Editing the Bazel configuration may prevent you opting out of Bazel.\nCustom behaviors driven by Bazel won't be available in other Builders.</p>\n<p>This section assumes you are familiar with <a href=\"https://docs.bazel.build\">Bazel</a>.</p>\n</div>\n<p>You can manually adjust the Bazel configuration to:</p>\n<ul>\n<li>customize the build steps</li>\n<li>parallellize the build for scale and incrementality</li>\n</ul>\n<p>Create the initial Bazel configuration files by running the following command: </p>\n<code-example language=\"sh\">\nng build --leaveBazelFilesOnDisk\n</code-example>\n<p>Now you'll find new files in the Angular workspace:</p>\n<ul>\n<li><code>/WORKSPACE</code> tells Bazel how to download external dependencies.</li>\n<li><code>/BUILD.bazel</code> and <code>/src/BUILD.bazel</code> tell Bazel about your source code.</li>\n</ul>\n<p>You can find a full-featured example with custom Bazel configurations at <a href=\"http://github.com/angular/angular-bazel-example\">http://github.com/angular/angular-bazel-example</a>.</p>\n<p>Documentation for using Bazel for frontend projects is linked from <a href=\"https://docs.bazel.build/versions/master/bazel-and-javascript.html\">https://docs.bazel.build/versions/master/bazel-and-javascript.html</a>.</p>\n<h2 id=\"running-bazel-directly\">Running Bazel directly<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/bazel#running-bazel-directly\"><i class=\"material-icons\">link</i></a></h2>\n<p>In some cases you'll want to bypass the Angular CLI builder, and run the Bazel CLI directly.\nThe Bazel CLI is in the <code>@bazel/bazel</code> npm package.\nYou can install it globally to get the <code>bazel</code> command in your path, or use <code>$(npm bin)/bazel</code> in place of bazel below.</p>\n<p>The common commands in Bazel are:</p>\n<ul>\n<li><code>bazel build [targets]</code>: Compile the default output artifacts of the given targets.</li>\n<li><code>bazel test [targets]</code>: For whichever <code>*_test</code> targets are found in the patterns, run the tests.</li>\n<li><code>bazel run [<a href=\"api/router/RouterLinkWithHref#target\" class=\"code-anchor\">target</a>]</code>: Compile the program represented by target, and then run it.</li>\n</ul>\n<p>To repeat the command any time the inputs change (watch mode), replace <code>bazel</code> with <code>ibazel</code> in these commands.</p>\n<p>The output locations are printed in the output.</p>\n<p>Full documentation for the Bazel CLI is at <a href=\"https://docs.bazel.build/versions/master/command-line-reference.html\">https://docs.bazel.build/versions/master/command-line-reference.html</a>.</p>\n<h2 id=\"querying-the-build-graph\">Querying the build graph<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/bazel#querying-the-build-graph\"><i class=\"material-icons\">link</i></a></h2>\n<p>Because Bazel constructs a graph out of your targets, you can find lots of useful information.</p>\n<p>Using the graphviz optional dependency, you'll have a program <code>dot</code>, which you can use with <code>bazel <a href=\"api/animations/query\" class=\"code-anchor\">query</a></code>:</p>\n<code-example language=\"bash\">\n$ bazel <a href=\"api/animations/query\" class=\"code-anchor\">query</a> --output=graph ... | dot -Tpng > graph.png\n</code-example>\n<p>See <a href=\"https://docs.bazel.build/versions/master/query-how-to.html\">https://docs.bazel.build/versions/master/query-how-to.html</a> for more details on <code>bazel <a href=\"api/animations/query\" class=\"code-anchor\">query</a></code>.</p>\n<h2 id=\"customizing-buildbazel-files\">Customizing <code>BUILD.bazel</code> files<a title=\"Link to this heading\" class=\"header-link\" aria-hidden=\"true\" href=\"guide/bazel#customizing-buildbazel-files\"><i class=\"material-icons\">link</i></a></h2>\n<p>\"Rules\" are like plugins for Bazel. Many rule sets are available. This guide documents the ones maintained by the Angular team at Google.</p>\n<p>Rules are used in <code>BUILD.bazel</code> files, which are markers for the packages in your workspace. Each <code>BUILD.bazel</code> file declares a separate package to Bazel, though you can have more coarse-grained distributions so that the packages you publish (for example, to <code>npm</code>) can be made up of many Bazel packages.</p>\n<p>In the <code>BUILD.bazel</code> file, each rule must first be imported, using the <code>load</code> statement. Then the rule is called with some attributes, and the result of calling the rule is that you've declared to Bazel how it can derive some outputs given some inputs and dependencies. Then later, when you run a <code>bazel</code> command line, Bazel loads all the rules you've declared to determine an absolute ordering of what needs to be run. Note that only the rules needed to produce the requested output will actually be executed.</p>\n<p>A list of common rules for frontend development is documented in the README at <a href=\"https://github.com/bazelbuild/rules_nodejs/\">https://github.com/bazelbuild/rules_nodejs/</a>. </p>\n\n</div>\n\n<!-- links to this doc:\n - cli\n-->\n<!-- links from this doc:\n - api/animations/query\n - api/router/RouterLinkWithHref#target\n - cli\n - guide/bazel#advanced-configuration\n - guide/bazel#building-with-bazel\n - guide/bazel#customizing-buildbazel-files\n - guide/bazel#querying-the-build-graph\n - guide/bazel#removing-bazel\n - guide/bazel#running-bazel-directly\n - guide/bazel#using-bazel-with-the-angular-cli\n - http://github.com/angular/angular-bazel-example\n - https://docs.bazel.build\n - https://docs.bazel.build/versions/master/bazel-and-javascript.html\n - https://docs.bazel.build/versions/master/command-line-reference.html\n - https://docs.bazel.build/versions/master/query-how-to.html\n - https://github.com/angular/angular/edit/master/aio/content/guide/bazel.md?message=docs%3A%20describe%20your%20change...\n - https://github.com/bazelbuild/rules_nodejs/\n-->"
}